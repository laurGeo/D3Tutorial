<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Building a bar chart tutorial</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  </head>
  <body>
        <script>
                var w = 300;
                var h = 120;
                var padding = 2;
           
                var dataset = [5, 22, 13, 15, 20, 25, 11, 14, 24, 9, 15];
                var svg = d3.select("body").append("svg")
                           .attr("height", h)
                           .attr("width", w);
           
           /*Creating a color picker function*/
            function colorPicker(v){
                if(v <=20) {return "#666666"}
                else if(v > 20){
                    return "#ff0033";
                }
            }

               svg.selectAll("rect")
                   .data(dataset)
                   .enter()
                   .append("rect")
                   .attr({
                       x: function(d, i){ return i* (w / dataset.length);},
                       y: function(d){return h - (d *4); },
                       y: function(d){ return h - (d * 4); },
                        width: w / dataset.length - padding,
                        height: function(d) {return d*4;},
                        fill: function(d){return colorPicker(d);}
                   });

                svg.selectAll("text")
                   .data(dataset)
                   .enter()
                   .append("text")
                   .text(function(d) {return d;})
                .attr({
                    "text-anchor": "middle",
                    x: function(d, i) {return i * (w/dataset.length) +(w / dataset.length - padding)/2;},
                    y: function(d) {return h - (d*4)+14;},
                    "font-family": "sans-serif",
                    "font-size": 12,
                    "fill": "white"
                })
             </script>

  </body>
  
</html>